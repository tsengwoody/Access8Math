# Access8Math feature

## 閱讀功能

*	完整閱讀
*	互動閱讀
*	導航瀏覽檢閱文字
*	簡化朗讀規則
*	項目與項目間停頓

## 書寫功能

*	以 AsciiMath 書寫數學內容
*	以 LaTeX 書寫數學內容
*	書寫綜合內容(文字內容與數學內容)

# Access8Math 說明

此 NVDA 附加元件提供數學內容的閱讀，原先NVDA亦有此功能，但因是調用MathPlayer的功能，部份功能尚顯不足，例如未提供或不完整的特定語言翻譯、未提供特定語言的導航瀏覽等等。

導航瀏覽可將一個數學內容分段成較小的部份片段進行報讀，並透過一系列的鍵盤按鍵操作來選擇讀取的片段和方式，此功能可更好的理解長數學內容結構與項與項之間的層級關系。

## 閱讀功能

*	報讀：可以序列化文字報讀在網頁瀏覽器(Mozilla Firefox, Microsoft Internet Explorer and Google Chrome)上以 MathML 撰寫的數學內容或在 Microsoft Word 上以 MathType 撰寫的數學物件(需安裝 MathType)
*	互動：在 MathML 數學物件上按下空白或 enter 可與該數學內容進行導航瀏覽，亦即可部份瀏覽數學內容中的子內容並在子內容間移動或縮放子內容大小
*	在 MathML 數學物件上按空白鍵後開啟「Access8Math 互動視窗」
	*	互動：與該數學物件進行導航瀏覽，亦即可部份瀏覽數學內容中的子內容並在子內容間移動或縮放子內容大小
	*	複製：複製物件 MathML 原始碼
*	文字檢閱：在導航瀏覽時按下數字鍵盤 1-9 可逐字、逐行閱讀序列化文字的數學內容
*	分析內容整體的數學意義：將 MathML 進行結構判斷分析，符合特定規則時，以該規則的數學意義進行朗讀
*	分析內容項目的數學意義：在導航瀏覽時會提示該項內容在其上層內容下的意義，例如分數項有兩項，在其間移動會報讀該項目為分母或分子

## 導航瀏覽時按鍵：

*	向下鍵縮小當前數學內容成更小的子內容
*	向上鍵放大當前數學內容成更大的子內容
*	向左鍵向前一項數學內容
*	向右鍵向後一項數學內容
*	"Ctrl+c": 複製物件MathML原始碼
*	home鍵回到最頂層(完整數學內容)
*	數字鍵盤1-9：使用NVDA 檢閱模式閱讀序列化的數學內容
*	esc鍵退出導航瀏覽模式

## 數學規則

主要結構分析規則：此些規則是為了提高常用結構的閱讀體驗

*	正規則
*	負規則
*	指數
*	平方指數規則
*	立方指數規則
*	帶分數
*	直線規則
*	線段規則
*	射線規則
*	向量規則
*	弧度規則
*	單符號向量規則
*	對數規則

簡化朗讀規則：簡化朗讀規則是各種規則的簡化版，當其內容僅為單一項目時，便可省略前後標記朗讀，以達到更好的理解與閱讀，而亦不致造成混淆

*	簡化下標與上標
*	簡化下標
*	簡化上標
*	簡化正下標與正上標
*	簡化正下標
*	簡化正上標
*	簡化分數
*	簡化平方根

## 多國語言客製設定

*	「unicode 字典」可客製設定各項符號文字的報讀方式。
*	「數學規則」可客製設定各數學類型的報讀方式。
*	「加入新語言」可加入原先於內建未提供的語言，加入後於一般設定內會多出剛新增的語系並可再透過「unicode 字典」與「數學規則」定義讀法達到多國語言客製化設定

### 符號讀法規則編輯

Access8Math 透過字典檔方式將特定符號對應到特定文字，以解決部份罕見符號語音合成器不支援、複合多個符號為一個數學符號(sin 為正弦)、或因部份符號通用性問題在數學上與一般使用上有所不同(! 為階層)等問題

新增：增加一組對應字典檔紀錄，按下後可輸入欲新增的符號，按確認後即可在字典檔紀錄列表上看到新增的符號

修改選擇符號：選擇一筆字典檔紀錄並在替代文字輸入值後，未來 Access8Math 看到此符號後即會對應以替代文字朗讀此符號

移除：選擇一筆字典檔紀錄後按下移除按鈕可刪除選定的字典檔紀錄

還原預設值：將字典檔列表還原到初始預設值。

匯入：將字典檔檔案匯入，可用於載入字典檔檔案。

匯出：將字典檔檔案儲存於指定路徑，以利分享或保存字典檔檔案。

### 數學規則編輯

Access8Math將常用數學式依據類型與邏輯，建立46項數學規則，程式依據這套規則判別數學式的唸法與唸讀順序，依據各地習慣不同，可以變更數學唸讀順序與唸法，方法如下：

編輯: 進入"數學規則"後，視窗內有數學規則列表，選則任一規則可選擇"編輯按鈕"進入編輯條目。

規則的"編輯條目"可分為兩大區塊，分別是序列化順序與子節點角色。
	*	序列化順序：將數學規則依據唸讀順序劃分多個區塊，在此區域可變更規則子項目的唸讀順序及開始、項目間與結束的分隔文字，以分數規則mfrac為例，此規則分為五個唸讀順序，順序0、2和4分別代表起始提示、項目區隔提示與結束提示，可在各欄位中輸入變更自己習慣的唸法，而順序1與3則可調整子節點唸讀的先後，可於下拉式選單中變更順序。
	*	子節點角色：為該數學規則的下一階層子項目，以分數規則mfrac為例，此項規則就包含分子與分母兩項，而在子節點欄位中，可以變更該項子內容在其上層子內容的意義文字，。

範例：可先行查閱確認編輯修改後對此類型的數學規則讀法。點擊後會出現一個預設好符合該對應數學規則的數學內容，供確認對此類型的數學規則讀法是否符合預期。

還原預設值：將數學規則列表還原到初始預設值。

匯入：將數學規則檔案匯入，可用於載入數學規則檔案。

匯出：將數學規則檔案儲存於指定路徑，以利分享或保存數學規則檔案。

## 書寫功能

以 LaTeX 書寫數學內容：按下功能表中的 「LaTeX...」 會顯示一可輸入 LaTeX 內容之對話框，書寫完成按下確定後，即會產生可與數學內容進行互動之 Access8Math 數學物件。

以 AsciiMath 書寫數學內容：按下功能表中的 「AsciiMath...」 會顯示一可輸入 AsciiMath 內容之對話框，書寫完成按下確定後，即會產生可與數學內容進行互動之 Access8Math 數學物件。

書寫綜合內容(文字內容與數學內容)：

### 輸寫綜合內容

使用分隔標記(開始分隔標記「\(」、結束分隔標記「\)」，下稱 LaTeX 標記區)來判斷文字內容與數學內容的區域，亦即在LaTeX 標記區內的資料為 LaTeX 數學內容，在 LaTeX 標記區外的為文字內容。

在編輯區按下 alt+h 可轉換出混合文字資料與數學資料的 HTML 文件並可進行檢視或匯出。其中 LaTeX 區塊之內容匯轉成 MathML 以利與一般文字並列呈現。

*	檢視：透過預設開啟 .HTML 副檔名的程式打開轉換後的 HTML 文件。
*	匯出：將轉換後的 HTML 文件打包成一壓縮檔。

在編輯區按下 alt+m 彈出標記指令視窗，選擇 LaTeX 按下 enter 鍵即會在當前游標處加入 LaTeX 區塊並會自動將游標移入其內，以快速輸入內容。

在編輯區按下 alt+l 彈出 LaTeX 指令視窗，選擇要加入的 LaTeX 指令項目按下 enter 鍵即會在當前游標處加入對應的 LaTeX 語法並會自動將游標移入適當輸入點，以快速輸入內容。

LaTeX 指令視窗

*	選擇 LaTeX 指令項目按下 f1~f12 設定快捷
*	選擇 LaTeX 指令項目按下 d 移除已設定的快捷
*	選擇 LaTeX 指令項目按下 enter 在當前游標處加入對應的 LaTeX 語法

編輯游標導航移動

*	在編輯區按下 alt+向左鍵移動到上一個資料區塊的開始點
*	在編輯區按下 alt+向下鍵不移動僅讀出當前資料區塊的內容
*	在編輯區按下 alt+向右鍵移動到下一個資料區塊的開始點
*	在編輯區按下 alt+home 移動到當前資料區塊的開始點
*	在編輯區按下 alt+end 移動到當前資料區塊的結束點

編輯游標導航移動選取

*	在編輯區按下 alt+shift+向左鍵移動到上一個資料區塊並選取
*	在編輯區按下 alt+shift+向下鍵移動到當前資料區塊並選取
*	在編輯區按下 alt+shift+向右鍵移動到下一個資料區塊並選取

在編輯區按下 alt+s 開啟或關閉快捷模式。當快捷模式開啟時按 f1~f12 可快速插入  LaTeX 語法。當快捷模式開啟時按 shift+f1~f12 可讀出該快捷當下綁定的 LaTeX 指令。

在編輯區且游標在 LaTeX 區塊處按下 alt+i 與該數學內容進行導航瀏覽

在編輯區按下 NVDA+shift+space 開啟或關閉編輯單鍵導航模式。當編輯單鍵導航模式開啟時可用單鍵導航移動編輯游標

下列的按鍵，若僅按該單一鍵，編輯游標會跳至其對應的後一個區塊位置，若同時按 Shift +該單一按鍵，編輯游標會跳至前一個區塊位置：

*	l: 移到下一個 LaTeX 語法區塊
*	t: 移到下一個文字區塊

綜合內容範例：一元二次方程式\(ax^2+bx+c=0\)的解為 \(\frac{-b\pm\sqrt{b^2-4ac}}{2a}\)。

## 設定

*	「一般設定」對話框：
	*	語言：Access8Math 朗讀數學內容的語言
	*	項目間隔時間：設定數學內容項目與項目間報讀停頓的時間，數值從1到100，數值愈小表示停頓時間愈短，反之數值愈大表示停頓時間愈長。
	*	當進入互動模式時，顯示 Access8Math 互動視窗：在數學物件上按下空白鍵時是否顯示「Access8Math 互動視窗」。
	*	分析內容的數學意義：將數學內容進行語意分析，符合特定規則時，以該規則進行朗讀
	*	在互動模式下導航時讀出字典預先定義的意義：在互動模式下導航時，當字典檔有定義時，使用字典檔讀出提示該項子內容在其上層子內容的意義
	*	在互動模式下導航時讀出自動產生的意義：在互動模式下導航時，當字典檔無定義或不完整時，使用自動產生功能讀出提示該項子內容在其上層子內容的意義或項次
	*	使用提示音來警告無移動：在互動模式下導航時，當無法在移動時發出提示音，如未勾選將以語音「無移動」提示
*	「規則設定」對話框：選擇特定規則是否啟用的設定。

## 範例

維基百科上的數學內容皆以MathML寫成

*	一元二次方程式：https://zh.wikipedia.org/wiki/一元二次方程
*	矩陣乘法：https://zh.wikipedia.org/zh-tw/%E7%9F%A9%E9%99%A3%E4%B9%98%E6%B3%95
*	三次方程式：https://zh.wikipedia.org/zh-tw/%E4%B8%89%E6%AC%A1%E6%96%B9%E7%A8%8B

一元二次方程解：

*	LaTeX: \(ax^2+bx+c=0\)
*	MathML: <math xmlns="http://www.w3.org/1998/Math/MathML"><mfrac><mrow><mo>-</mo><mi>b</mi><mo>&#xB1;</mo><msqrt><msup><mi>b</mi><mn>2</mn></msup><mo>-</mo><mn>4</mn><mi>a</mi><mi>c</mi></msqrt></mrow><mrow><mn>2</mn><mi>a</mi></mrow></mfrac></math>

github： https://github.com/tsengwoody/Access8Math

歡迎提出見意與bug回報，謝謝！

# Access8Math v3.0 更新日誌

*	以 LaTeX 書寫數學內容
*	以 AsciiMath 書寫數學內容
*	書寫綜合內容(文字內容與數學內容)
*	在編輯區內容以快捷鍵移動游標至不同類型區塊
*	在編輯區內容使用指令功能表選擇指令
*	在 LaTeX 指令功能表設定快捷
*	在編輯區內檢視與匯出內容成 HTML

# Access8Math v2.6 更新日誌

*	開啟互動視窗後會自動進入互動模式
*	可以選擇在互動模式下如何提示「無移動」的方式：提示音或語音「無移動」兩種，在一般設定內有多一個「使用提示音來警告無移動」的選項
*	無移動時會再重複報讀一次當前項的內容

# Access8Math v2.5 更新日誌

*	加入俄語的翻譯，感謝 Futyn-Maker 的翻譯工作
*	修正複合符號翻譯失敗的問題
*	移除在 en unicode.dic 內重複的小寫字母並加入大寫字母(0370~03FF)

# Access8Math v2.4 更新日誌

*	修正已知問題

# Access8Math v2.3 更新日誌

*	相容於 Python3
*	重構模組與修正程式碼風格
*	加入單符號向量規則

# Access8Math v2.2 更新日誌

*	修政單一節點有多字元時無法正確報讀
*	修政設定視窗的相容性問題，可相容 NVDA 2019.2，感謝 CyrilleB79 的 pull requests 
*	修政 unicode 有重複符號時的處理
*	加入法語的翻譯，感謝 CyrilleB79 的翻譯工作
*	新增與修政部份介面快速鍵設定

# Access8Math v2.1 更新日誌

*	在「一般設定」中，可設定進入互動模式時，是否一併自動顯示「Access8Math 互動視窗」
*	在互動模式中，當無顯示互動視窗時，可透過 ctrl+m 來手動顯示互動視窗
*	修政多國語言切換問題
*	加入土耳其語的翻譯，感謝 Cagri(Çağrı Doğan) 的翻譯工作
*	相容性更新，針對 NVDA 2019.1 對附加元件 manifest 標示的檢查
*	重構對話視窗原始碼

# Access8Math v2.0 更新日誌

*	加入多國語系新增與客製化設定功能，新增三個視窗「unicode 字典」、「數學規則」、「加入新語言」
*	unicode 字典可客製設定各項符號文字的報讀方式。
*	數學規則可客製設定各數學類型的報讀方式並可於修改完成前透過範例的按鈕先行查閱修改的效果。
*	加入新語言可加入原先於內建未提供的語言，加入後於一般設定內會多出剛新增的語系並可再透過「unicode 字典」與「數學規則」定義讀法達到多國語言客製化設定
*	優化在互動模式下，可使用數字鍵7~9以行為單位閱讀序列文字

# Access8Math v1.5 更新日誌

*	在「一般設定」新增項與項間停頓時間設定。數值從1到100，數值愈小表示停頓時間愈短，反之數值愈大表示停頓時間愈長。
*	更新 unicode.dic

# Access8Math v1.4 更新日誌

*	調整設定選項對話框，分為「一般設定」、「規則設定」對話框。「一般設定」為原先「Access8Math 設定」對話框，「規則設定」對話框則為可選擇特定規則是否啟用的設定。
*	新規則
	*	向量規則：當兩個Identifier的正上方有「⇀」時，將其項讀為「向量……」
	*	弧度規則：當兩個Identifier的正上方有「⌢」時，將其項讀為「弧……」
*	修正已知問題

# Access8Math v1.3 更新日誌

*	新規則
	*	正規則：當「+」在首項或其前項為<mo></mo>標記時，將「+」讀為「正」而非「加」
	*	平方規則：當次方數為2時，將其讀為「…的平方」
	*	立方規則：當次方數為3時，將其項讀為「…的立方」
	*	直線規則：當兩個Identifier的正上方有「↔」時，將其項讀為「直線……」
	*	線段規則：當兩個Identifier的正上方有「¯」時，將其項讀為「線段……」
	*	射線規則：當兩個Identifier的正上方有「→」時，將其項讀為「射線……」
*	新增互動視窗：在數學內容上按空白鍵後開啟「Access8Math 互動視窗」，視窗內含有「互動」、「複製」按鈕。
	*	互動：進入數學內容導航瀏覽
	*	複製：複製物件MathML原始碼
*	多國語言新增 zh_CN 的語言
*	調整規則間繼承關係，確保規則衝突時，能正確使用適合的規則
*	修正已知問題

# Access8Math v1.2 更新日誌

*	新規則
	*	負規則：當「-」在首項或其前項為<mo></mo>標記時，將「-」讀為「負」而非「減」
	*	帶分數：當分數前項為數字時，將數字與分數間讀為「又」
*	程式架構優化
	*	加入「sibling」的類別
	*	加入動態產生「反向」 nodetype的類別
*	修正已知問題

# Access8Math v1.1 更新日誌

*	在導航瀏覽時按"Ctrl+c"複製物件MathML原始碼
*	再偏好設定內增加 Access8Math 設定的項目，設定選項對話框，可設定：
	*	語言：Access8Math 朗讀數學內容的語言
	*	分析內容的數學意義：將數學內容進行語意分析，符合特定規則時，以該規則的數學意義進行朗讀
	*	讀出字典有定義模式的意義：當字典檔有定義時，使用字典檔讀出提示該項子內容在其上層子內容的意義
	*	讀出自動生成的意義：當字典檔無定義或不完整時，使用自動產生功能讀出提示該項子內容在其上層子內容的意義或項次
*	加入多條簡單規則，簡單規則是各種規則的簡化版，當其內容僅為單一項目時，便可省略前後標記朗讀，以達到更好的理解與閱讀，而亦不致造成混淆
*	更新unicode.dic
*	修正已知問題
